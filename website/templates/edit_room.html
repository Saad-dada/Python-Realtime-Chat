{% extends "base.html" %}
{% block title %}WhisperTalk | Edit Room{% endblock %}
{% block content %}
    <div class="edit-room-container">
        <h2 style="color:white;">Edit Room</h2>
        <div class="edit-room-form">
            <form action="{{ url_for('views.edit_room', room_id=room.id) }}" method="post">
                <!-- Room Name -->
                <div class="form-group">
                    <label for="roomName">Room Name</label>
                    <input type="text" id="roomName" name="room_name" value="{{ room.room_name }}" required>
                </div>

                <!-- Private Status -->
                <div class="form-group">
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" id="privateStatus" name="is_private" {% if room.is_private %}checked{% endif %}>
                        <label class="custom-control-label" for="privateStatus">Private Room</label>
                    </div>
                </div>

                <!-- Generate New Invite Code -->
                <div class="form-group">
                    <label>Generated Invite Code</label>
                    <input type="text" id="generateCode" name="generate_code" readonly>
                    <button id="btn-editroom" class="btn-primary" type="button" onclick="generateInviteCode()">Generate</button>
                </div>

                <!-- Description -->
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea style="color:#61dafb;"id="description" name="description" rows="4">{{ room.description }}</textarea>
                </div>

                <!-- Submit Button -->
                <div class="form-group">
                    <button id="btn-editroom" class="btn-primary" type="submit">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function generateInviteCode() {
            // Fetch the invite code from the server
            fetch('/generate_invite_code')
                .then(response => response.json())
                .then(data => {
                    // Update the value of the 'generateCode' input field with the generated code
                    document.getElementById('generateCode').value = data.invite_code;
                })
                .catch(error => {
                    console.error('Error generating invite code:', error);
                });
        }
    </script>
{% endblock %}
